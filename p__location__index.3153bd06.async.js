(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"1yts":function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("y8nQ");var d=n(a("Vl3Y"));a("g9YV");var i=n(a("wCAj"));a("fu2T");var o=n(a("gK9i"));a("bP8k");var r=n(a("gFTJ"));a("bbsP");var c=n(a("/wGt")),u=l(a("q1tI")),s=n(a("lc5D")),f=n(a("jQzR")),m=function(e){return(0,u.useEffect)(function(){},[]),u.default.createElement(c.default,{title:"\u6570\u636e\u76ee\u5f55",visible:!0,placement:"right",onClose:function(){return e.close()},width:750},u.default.createElement(r.default,{title:"\u8bbe\u5907\u57fa\u672c\u4fe1\u606f",bordered:!0,column:1,size:"small",style:{marginBottom:20}},u.default.createElement(r.default.Item,{label:"\u8bbe\u5907ID"},e.deviceInfo.objectId),u.default.createElement(r.default.Item,{label:"\u8bbe\u5907\u540d\u79f0"},e.deviceInfo.deviceName),u.default.createElement(r.default.Item,{label:"\u5efa\u8bbe\u5355\u4f4d"},e.deviceInfo.orgName),u.default.createElement(r.default.Item,{label:"\u8bbe\u5907\u5730\u5740"},e.deviceInfo.addr),u.default.createElement(r.default.Item,{label:"\u5efa\u8bbe\u65f6\u95f4"},e.deviceInfo.startUseTime)),u.default.createElement("div",{style:{marginBottom:20}},u.default.createElement("div",{className:"ant-descriptions-title"},"\u793a\u4f8b\u6570\u636e"),u.default.createElement(o.default,{defaultActiveKey:["1","2","3","4"]},u.default.createElement(o.default.Panel,{header:"\u57fa\u7840\u6570\u636e",key:"1"},u.default.createElement("h4",{style:{fontWeight:"bold"}},"\u8bf4\u660e"),u.default.createElement(i.default,{size:"middle",pagination:!1,dataSource:f.default.basicData,columns:f.default.tableHerder})),!e.isGps&&u.default.createElement(o.default.Panel,{header:"\u5fc3\u8df3\u6570\u636e",key:"2"},u.default.createElement("h4",{style:{fontWeight:"bold",marginBottom:10}},"\u8bf4\u660e"),u.default.createElement(i.default,{style:{marginBottom:20},size:"middle",pagination:!1,dataSource:f.default.heartData,columns:f.default.tableHerder}),u.default.createElement("h4",{style:{fontWeight:"bold",marginBottom:10}},"\u63a5\u53e3\u793a\u4f8b\u6570\u636e"),u.default.createElement(s.default,{readOnly:!0,value:JSON.stringify(f.default.heartDataJson,null,2),mode:"json",theme:"eclipse",name:"app_code_editor",key:"deviceShadow",fontSize:14,showPrintMargin:!0,showGutter:!0,wrapEnabled:!0,highlightActiveLine:!0,enableSnippets:!0,style:{width:"100%",height:"160px"},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2}})),!e.isGps&&u.default.createElement(o.default.Panel,{header:"\u62a5\u8b66\u6570\u636e",key:"3"},u.default.createElement("h4",{style:{fontWeight:"bold",marginBottom:10}},"\u8bf4\u660e"),u.default.createElement(i.default,{style:{marginBottom:20},size:"middle",pagination:!1,dataSource:f.default.alertData,columns:f.default.tableHerder}),u.default.createElement("h4",{style:{fontWeight:"bold",marginBottom:10}},"\u63a5\u53e3\u793a\u4f8b\u6570\u636e"),u.default.createElement(s.default,{readOnly:!0,value:JSON.stringify(f.default.alertDataJson,null,2),mode:"json",theme:"eclipse",name:"app_code_editor",key:"deviceShadow",fontSize:14,showPrintMargin:!0,showGutter:!0,wrapEnabled:!0,highlightActiveLine:!0,enableSnippets:!0,style:{width:"100%",height:"220px"},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2}})),e.isGps&&u.default.createElement(o.default.Panel,{header:"\u4f4d\u7f6e\u6570\u636e",key:"4"},u.default.createElement("h4",{style:{fontWeight:"bold",marginBottom:10}},"\u8bf4\u660e"),u.default.createElement(i.default,{style:{marginBottom:20},size:"middle",pagination:!1,dataSource:f.default.positionData,columns:f.default.tableHerder}),u.default.createElement("h4",{style:{fontWeight:"bold",marginBottom:10}},"\u63a5\u53e3\u793a\u4f8b\u6570\u636e"),u.default.createElement(s.default,{readOnly:!0,value:JSON.stringify(f.default.positionDataJson,null,2),mode:"json",theme:"eclipse",name:"app_code_editor",key:"deviceShadow",fontSize:14,showPrintMargin:!0,showGutter:!0,wrapEnabled:!0,highlightActiveLine:!0,enableSnippets:!0,style:{width:"100%",height:"100px"},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2}})))))},p=d.default.create()(m);t.default=p},jQzR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=[{title:"\u5b57\u6bb5\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u5b57\u6bb5\u7f16\u7801",dataIndex:"code",key:"code"},{title:"\u5b57\u6bb5\u7c7b\u578b",dataIndex:"type",key:"type"},{title:"\u5b57\u6bb5\u957f\u5ea6",dataIndex:"len",key:"len"},{title:"\u662f\u5426\u5fc5\u987b",dataIndex:"required",key:"required"},{title:"\u793a\u4f8b\u6570\u636e",dataIndex:"example",key:"example"}],n=[{name:"\u8bbe\u5907\u7f16\u7801",code:"deviceCode",type:"\u5b57\u7b26\u4e32",len:"32",required:"\u662f",example:"Mh_Yangan_001"},{name:"\u8bbe\u5907\u540d\u79f0",code:"deviceName",type:"\u5b57\u7b26\u4e32",len:"32",required:"\u662f",example:"\u4e00\u53f7\u70df\u611f\u5668"},{name:"\u8bbe\u5907\u6240\u5c5e\u4ea7\u54c1\u7f16\u7801",code:"productCode",type:"\u5b57\u7b26\u4e32",len:"32",required:"\u662f",example:"Mh_Yangan"},{name:"\u5f52\u5c5e\u5355\u4f4d\u540d\u79f0",code:"orgName",type:"\u5b57\u7b26\u4e32",len:"32",required:"\u662f",example:"\u9a6c\u6865\u9547"},{name:"\u5f52\u5c5e\u5355\u4f4d\u7f16\u7801",code:"orgId",type:"\u5b57\u7b26\u4e32",len:"32",required:"\u662f",example:"10705"}],d=[{name:"\u8bbe\u5907\u7f16\u7801",code:"deviceCode",type:"\u5b57\u7b26\u4e32",len:32,required:"\u662f",example:"Mh_Yangan_001"},{name:"\u4fe1\u53f7\u5f3a\u5ea6",code:"signalLevel",type:"\u5b57\u7b26\u4e32",len:30,required:"\u662f",example:"-120"},{name:"\u7535\u91cf",code:"volt",type:"\u6570\u5b57",len:15,required:"\u662f",example:3.3},{name:"\u7ecf\u5ea6",code:"lon",type:"\u6570\u5b57",len:15,required:"\u5426",example:122.375284},{name:"\u7eac\u5ea6",code:"lat",type:"\u6570\u5b57",len:15,required:"\u5426",example:31.11618},{name:"\u53d1\u751f\u65f6\u95f4",code:"createdTime",type:"\u65f6\u95f4\u6233",len:"",required:"\u662f",example:1573089486}],i={deviceCode:"deviceCode",signalLevel:100,volt:99,lon:122.375284,lat:31.11618,createdTime:1573089486,param:{}},o=[{name:"\u8bbe\u5907\u7f16\u7801",code:"deviceCode",type:"\u5b57\u7b26\u4e32",len:32,required:"\u662f",example:"Mh_Yangan_001"},{name:"\u7ecf\u5ea6",code:"lon",type:"\u6570\u5b57",len:15,required:"\u5426",example:122.375284},{name:"\u7eac\u5ea6",code:"lat",type:"\u6570\u5b57",len:15,required:"\u5426",example:31.11618},{name:"\u53d1\u751f\u65f6\u95f4",code:"createdTime",type:"\u65f6\u95f4\u6233",len:"",required:"\u662f",example:1573089486},{name:"\u53d1\u751f\u5730\u70b9",code:"addr",type:"\u5b57\u7b26\u4e32",len:255,required:"\u662f",example:"\u94f6\u6625\u8def1799\u5f04\u56ed\u533a"},{name:"\u4e8b\u4ef6\u5927\u7c7b\u7f16\u7801",code:"eventCode1",type:"\u5b57\u7b26\u4e32",len:50,required:"\u662f",example:2},{name:"\u4e8b\u4ef6\u5927\u7c7b\u540d\u79f0",code:"eventName1",type:"\u5b57\u7b26\u4e32",len:255,required:"\u662f",example:"\u9884\u8b66\u4e8b\u4ef6"},{name:"\u4e8b\u4ef6\u5c0f\u7c7b\u7f16\u7801",code:"eventCode2",type:"\u5b57\u7b26\u4e32",len:50,required:"\u662f",example:2001},{name:"\u4e8b\u4ef6\u5c0f\u7c7b\u540d\u79f0",code:"eventName2",type:"\u5b57\u7b26\u4e32",len:255,required:"\u662f",example:"\u7535\u91cf\u4e0d\u8db3"}],r={deviceCode:"Mh_Yangan_001",lon:122.375284,lat:31.11618,createdTime:1573089486,addr:"\u4e0a\u6d77\u5e02",eventCode1:"02",eventName1:"\u9884\u8b66\u4e8b\u4ef6",eventCode2:"02001",eventName2:"\u7535\u91cf\u4e0d\u8db3",description:"\u5907\u6ce8\u4fe1\u606f",param:{}},c=[{name:"\u8bbe\u5907\u7f16\u7801",code:"deviceCode",type:"\u5b57\u7b26\u4e32",len:32,required:"\u662f",example:"Mh_Yangan_001"},{name:"\u7ecf\u5ea6",code:"lon",type:"\u6570\u5b57",len:15,required:"\u5426",example:122.375284},{name:"\u7eac\u5ea6",code:"lat",type:"\u6570\u5b57",len:15,required:"\u5426",example:31.11618},{name:"\u53d1\u751f\u65f6\u95f4",code:"createdTime",type:"\u65f6\u95f4\u6233",len:"",required:"\u662f",example:1573089486}],u={deviceCode:"Mh_Yangan_001",lon:122.375284,lat:31.11618,createdTime:1573089486},s={tableHerder:l,basicData:n,heartData:d,heartDataJson:i,alertData:o,alertDataJson:r,positionData:c,positionDataJson:u};t.default=s},lObD:function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var d=n(a("wCAj"));a("miYZ");var i=n(a("tsqr"));a("sRBo");var o=n(a("kaz8"));a("Znn+");var r=n(a("ZTPi"));a("+L6B");var c=n(a("2/Rp"));a("5NDa");var u=n(a("5rEg")),s=n(a("eHn4"));a("y8nQ");var f=n(a("Vl3Y"));a("OaEy");var m=n(a("2fM7"));a("BoS7");var p=n(a("Sdc0"));a("IzEo");var v=n(a("bx4M"));a("T2oS");var h=n(a("W9HT")),g=n(a("d6i3")),y=n(a("1l/V")),E=n(a("gWZ8")),I=n(a("qIgq")),b=l(a("q1tI")),x=a("/MKj"),w=n(a("CLrh")),S=n(a("fDFt")),k=n(a("gkVL")),L=n(a("cPhT")),C=n(a("eFae")),_=n(a("1yts")),D=9999999,q=null,P=function(e){var t,a,l={pathPolygon:[],markersList:[],regionList:[],productList:[],mapCreated:{},infoWindow:{},massMarksCreated:{},centerScale:{center:[106.57,29.52]},regionInfo:{},satelliteLayer:{},roadNetLayer:{},deviceData:{},contentInfo:["bg","road","point","building"],alarmLogData:{},searchParam:{pageSize:10,sorts:{field:"alarmTime",order:"desc"}},processInfo:[],departmentList:[],deviceTypeList:[],showProcessSet:!0,showMode:"default",examplePopVisible:!1,isGps:!1},n=e.form.getFieldDecorator,x=e.form,P=(0,b.useState)(l.pathPolygon),z=(0,I.default)(P,2),O=(z[0],z[1],(0,b.useState)(l.markersList)),N=(0,I.default)(O,2),B=N[0],T=N[1],M=(0,b.useState)(l.regionList),A=(0,I.default)(M,1),j=(A[0],(0,b.useState)(l.productList)),J=(0,I.default)(j,1),V=(J[0],(0,b.useState)(l.mapCreated)),F=(0,I.default)(V,2),G=(F[0],F[1],(0,b.useState)(l.infoWindow)),W=(0,I.default)(G,2),Y=(W[0],W[1],(0,b.useState)(l.massMarksCreated)),Z=(0,I.default)(Y,2),R=(Z[0],Z[1],(0,b.useState)(!1)),H=(0,I.default)(R,2),Q=H[0],K=H[1],U=(0,b.useState)(""),X=(0,I.default)(U,2),$=X[0],ee=X[1],te=(0,b.useState)(l.centerScale),ae=(0,I.default)(te,2),le=(ae[0],ae[1]),ne=(0,b.useState)(l.satelliteLayer),de=(0,I.default)(ne,2),ie=(de[0],de[1],(0,b.useState)(l.roadNetLayer)),oe=(0,I.default)(ie,2),re=(oe[0],oe[1],(0,b.useState)(!0)),ce=(0,I.default)(re,2),ue=ce[0],se=ce[1],fe=(0,b.useState)(!0),me=(0,I.default)(fe,2),pe=me[0],ve=me[1],he=(0,b.useState)(!1),ge=(0,I.default)(he,2),ye=ge[0],Ee=ge[1],Ie=(0,b.useState)(!1),be=(0,I.default)(Ie,2),xe=be[0],we=be[1],Se=(0,b.useState)(l.deviceData),ke=(0,I.default)(Se,2),Le=ke[0],Ce=(ke[1],(0,b.useState)(l.contentInfo)),_e=(0,I.default)(Ce,2),De=_e[0],qe=_e[1],Pe=(0,b.useState)(l.alarmLogData),ze=(0,I.default)(Pe,2),Oe=(ze[0],ze[1]),Ne=(0,b.useState)(l.searchParam),Be=(0,I.default)(Ne,2),Te=Be[0],Me=(Be[1],(0,b.useState)(l.processInfo)),Ae=(0,I.default)(Me,2),je=Ae[0],Je=Ae[1],Ve=(0,b.useState)(l.departmentList),Fe=(0,I.default)(Ve,2),Ge=Fe[0],We=Fe[1],Ye=(0,b.useState)(l.deviceTypeList),Ze=(0,I.default)(Ye,2),Re=Ze[0],He=Ze[1],Qe=(0,b.useState)(l.deviceTypeList),Ke=(0,I.default)(Qe,2),Ue=Ke[0],Xe=Ke[1],$e=(0,b.useState)(l.showProcessSet),et=(0,I.default)($e,2),tt=et[0],at=et[1],lt=(0,b.useState)(l.showMode),nt=(0,I.default)(lt,2),dt=nt[0],it=nt[1],ot=(0,b.useState)(l.examplePopVisible),rt=(0,I.default)(ot,2),ct=rt[0],ut=rt[1],st=(0,b.useState)({}),ft=(0,I.default)(st,2),mt=ft[0],pt=ft[1],vt=(0,b.useState)(l.isGps),ht=(0,I.default)(vt,2),gt=ht[0],yt=ht[1],Et=(0,b.useState)([]),It=(0,I.default)(Et,2),bt=It[0],xt=It[1],wt=(0,b.useState)([]),St=(0,I.default)(wt,2),kt=St[0],Lt=St[1],Ct=(0,b.useState)([]),_t=(0,I.default)(Ct,2),Dt=_t[0],qt=_t[1],Pt=(0,b.useState)(0),zt=(0,I.default)(Pt,2),Ot=zt[0],Nt=zt[1];function Bt(e){var t=[],a=[];e.forEach(function(e){if(e){var l,n=(l=CoordUtil).gcj02towgs84.apply(l,(0,E.default)(e.lnglat));a.push([n[0],n[1],0]),t.push({id:e.deviceInfo.id,position:{x:n[0],y:n[1],z:0},attributes:e,image:{url:e.deviceInfo.imgpath?window.location.origin+"/mapIcon@2x/"+e.deviceInfo.imgpath+".png":window.location.origin+"/mapIcon@2x/MAP_ICON_001_online.png",width:46,height:53,pixelOffset:[0,-23]}})}});var l={isZoom:!1,click:function(e){Vt(e.attributes)}};Ot&&q.goTo(a,{duration:3,offset:{heading:0,pitch:-89,range:0},maximumZoomDistance:5e4}),q.Locate.pointLocate(t,l),Nt(Ot+1)}function Tt(e,t){var a={id:"100001",position:e},l={isZoom:!1},n={duration:3,offset:{heading:0,pitch:-90,range:0},maximumZoomDistance:5e4};q.goTo(t,n),q.Locate.trackLocate(a,l)}(0,b.useEffect)(function(){var e=new URL(window.location.href),t="default";e.href.indexOf("/location/popups")>-1?t="popup":e.href.indexOf("/location/simple")>-1&&(t="simple"),it(t),w.default.deviceInstance.queryDimensionDevice().then(function(e){if(200===e.status){We(e.result);var t=[],a=[],l=[];(e.result||[]).forEach(function(e){(e.deviceInstance||[]).forEach(function(e){-1===a.indexOf(e.classifiedId)&&(t.push(e),a.push(e.classifiedId))}),(e.addrList||[]).forEach(function(e){-1===l.indexOf(e)&&l.push(e)})}),Lt(l),He(t),qt(l),Xe(t)}}).catch(function(){})},[]),(0,b.useEffect)(function(){return q||w.default.deviceLocation.sm2().then(function(e){var t=e.result;q=new JMap;var a={base_layer_name:"dark",model_data_name:"",camera:{x:121.51755979681737,y:31.119248058007418,radius:18e3,offset:{heading:-4,pitch:-90,range:0}},map_complete_callback:function(){ve(!1),Jt({filter:{where:"objectType = device",pageSize:D}},"new")}};q.createMap("mapContainer",t,window.location.origin,a,{}),q.hideBuildingModel();var l=new JMapQuery(q),n=new JMapQueryParam({queryMapService:"mh_dyn_district",queryMapLayers:[1],queryGeometry:null,queryWhere:"",outFields:["*"],callBack:d});function d(e){xt(e.features),console.log("\u8857\u9053\uff1a",e)}l.execQuery(n)}),function(){q&&(q.Popup.hide(),q=null)}},[]);var Mt=function(){var e=(0,y.default)(g.default.mark(function e(){return g.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:x.validateFields(function(e,t){if(!e){var a=["objectType = device"];if(t.classifiedIdList&&0!==t.classifiedIdList.length)a.push("classifiedId in ("+t.classifiedIdList.toString()+")");else if(t.orgId){var l=[];Ge.some(function(e){e.id===t.orgId&&e.deviceInstance.forEach(function(e){l.push(e.classifiedId)})}),l.length>0&&a.push("classifiedId in ("+l.toString()+")")}"deviceId"===t.device.key&&t.device.value?a.push("objectId="+t.device.value):"deviceName"===t.device.key&&t.device.value&&a.push("deviceName="+t.device.value),Jt({shape:{addr:t.addr,objectId:t.region},filter:{where:a.join(" and "),pageSize:D}},"old")}});case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),At=[{title:"\u7c7b\u578b",dataIndex:"deviceInfo.classifiedName"},{title:"\u540d\u79f0",dataIndex:"deviceInfo.deviceName"},{title:"\u5730\u5740",dataIndex:"deviceInfo.addr"},{title:"\u64cd\u4f5c",align:"center",width:"120px",render:function(e){return b.default.createElement(b.Fragment,null,b.default.createElement("a",{onClick:function(){window.seeExample(e.deviceInfo.productId)}},"\u67e5\u770b\u6570\u636e\u76ee\u5f55"))}}],jt=function(){x.validateFields(function(e,t){e||(Te.terms||(Te.terms={}),t.productId&&(Te.terms.productId=t.productId),"deviceId"===t.device.key&&t.device.value?Te.terms.deviceId=t.device.value:"deviceName"===t.device.key&&t.device.value&&(Te.terms.deviceName=t.device.value))})},Jt=function(e,t){q&&(q.Locate.clearLocate(),q.Popup.hide());var a=[];w.default.location._search_geo_json2(e).then(function(e){console.log("response:",e),200===e.status&&(e.result.features.map(function(e){"Point"===e.geometry.type&&("old"===t&&le({center:e.geometry.coordinates}),a.push({lnglat:e.geometry.coordinates,deviceInfo:e.properties}))}),T(a),q&&a.length&&Bt(a),ve(!1))}).catch(function(){})};window.seeExample=function(e){q&&q.Popup.hide(),e&&yt(e.indexOf("GPS")>-1),null===B||void 0===B||B.some(function(t){if(t.deviceInfo.productId===e)return pt(t.deviceInfo),ut(!0),!0})};var Vt=function(e){var t;q.Popup.hide();var a="<div class='yscDynamicLayer ysc-dynamic-layer ys-css3-box'><div class='line' style='transform: scale(0.6);transform-origin: right 0;'></div>\n               <div class='main'>\n                   <div style='float: right;width: 13px;height: 13px;position: absolute;top:8px;right:9px;cursor: pointer;' onclick=\"javascript:$('.yscDynamicLayer').parent().remove()\"></div>\n                   <div style='margin-left: 3%;right:50px;top:25px;'>\n                        <div style='font-size:14px;color:#fff;height:20px;line-height:20px'><span style='color:#48cbe8'>\u8bbe\u5907ID\uff1a</span>".concat(e.deviceInfo.objectId,"</div>\n                        <div style='font-size:14px;color:#fff;height:20px;line-height:20px'><span style='color:#48cbe8'>\u8bbe\u5907\u540d\u79f0\uff1a</span>").concat(e.deviceInfo.deviceName,"</div>\n                        <div style='font-size:14px;color:#fff;height:20px;line-height:20px'><span style='color:#48cbe8'>\u8bbe\u5907\u5730\u5740\uff1a</span>").concat(e.deviceInfo.addr,"</div>\n                        <div style='font-size:14px;color:#fff;height:20px;line-height:20px'><span style='color:#48cbe8'>\u5f53\u524d\u4f4d\u7f6e\uff1a</span>").concat(e.lnglat.valueOf(),"</div>\n                        <div style='font-size:14px;color:#fff;height:20px;line-height:20px'><span style='color:#48cbe8'>\u6295\u5165\u4f7f\u7528\u65e5\u671f\uff1a</span>").concat(e.deviceInfo.startUseTime,"</div>\n                        <div style='font-size:14px;color:#fff;height:20px;line-height:20px'><span style='color:#48cbe8'>\u62a5\u8b66\u6b21\u6570\uff1a</span>").concat(e.deviceInfo.alarmCount,"</div>\n                   </div>\n               </div>\n              </div>"),l=(t=CoordUtil).gcj02towgs84.apply(t,(0,E.default)(e.lnglat)),n={id:e.deviceInfo.id,position:{x:l[0],y:l[1],z:0},element:a},d={isZoom:!1};q.goTo({x:l[0],y:l[1],radius:100},{duration:3,offset:{heading:0,pitch:-90,range:0},maximumZoomDistance:5e4}),q.Popup.show(n,d)},Ft=function(e,t){e?Ge.some(function(t){if(t.id===e)return He(t.deviceInstance||[]),Lt(t.addrList||[]),!0}):(He(Ue),Lt(Dt)),x.setFieldsValue({productId:[]}),x.setFieldsValue({addr:[]})};return b.default.createElement("div",null,b.default.createElement(h.default,{tip:"\u52a0\u8f7d\u4e2d...",spinning:pe},b.default.createElement("div",{style:{width:"100%",height:"default"!==dt?"100vh":"88vh"}},b.default.createElement("div",{id:"mapContainer",style:{width:"100%",height:"default"!==dt?"100vh":"88vh"}})),b.default.createElement("div",{style:{width:"30%",height:"default"!==dt?"100vh":"88vh",float:"right",maxWidth:"480px",marginTop:"default"!==dt?"-100vh":"-88vh",paddingTop:5,paddingRight:5}},b.default.createElement("div",{style:{textAlign:"left"}},b.default.createElement(v.default,{size:"small"},"\u4fe1\u606f\u9762\u677f\uff1a",b.default.createElement(p.default,{key:"panelInfoSwitch",checked:ue,checkedChildren:"\u5f00",unCheckedChildren:"\u5173",onChange:function(e){se(e)}}),"\xa0\xa0\xa0\xa0\u9009\u62e9\u533a\u57df\uff1a",b.default.createElement(m.default,{style:{width:120},placeholder:"\u9009\u62e9\u533a\u57df",allowClear:!0,onChange:function(e,t){if(q.Locate.clearLocate(["100001"]),e){var a=t.props.data.geometry.rings[0],l=[],n=[];for(var d in a)l.push({x:a[d][0],y:a[d][1],z:5}),n.push([].concat((0,E.default)(a[d]),[0]));Tt(l,n)}}},(bt||[]).map(function(e){return b.default.createElement(m.default.Option,{key:e.attributes.code,value:e.attributes.code,data:e},e.attributes.name)})))),ue&&b.default.createElement(v.default,{size:"small",bordered:!1,style:{height:"default"!==dt?"90vh":"80vh",overflowY:"auto",overflowX:"hidden",marginTop:5}},b.default.createElement(f.default,{labelCol:{span:5},wrapperCol:{span:19},key:"queryForm"},b.default.createElement(f.default.Item,{key:"orgId",label:"\u5efa\u8bbe\u5355\u4f4d",style:{marginBottom:0}},n("orgId",{})(b.default.createElement(m.default,{placeholder:"\u9009\u62e9\u5efa\u8bbe\u5355\u4f4d",onChange:Ft,allowClear:!0},(Ge||[]).map(function(e){return b.default.createElement(m.default.Option,{key:e.id,value:e.id,data:e},e.name)})))),b.default.createElement(f.default.Item,{key:"classifiedIdList",label:"\u8bbe\u5907\u7c7b\u578b",style:{marginBottom:0}},n("classifiedIdList",{initialValue:[]})(b.default.createElement(m.default,(t={mode:"multiple",placeholder:"\u9009\u62e9\u8bbe\u5907\u7c7b\u578b"},(0,s.default)(t,"mode","multiple"),(0,s.default)(t,"allowClear",!0),t),(Re||[]).map(function(e){return b.default.createElement(m.default.Option,{key:e.classifiedId,value:e.classifiedId,data:e},e.classifiedName)})))),b.default.createElement(f.default.Item,{key:"addr",label:"\u8bbe\u5907\u5730\u5740",style:{marginBottom:0}},n("addr",{initialValue:[]})(b.default.createElement(m.default,(a={showSearch:!0,mode:"multiple",placeholder:"\u9009\u62e9\u8bbe\u5907\u5730\u5740",maxTagCount:1},(0,s.default)(a,"mode","multiple"),(0,s.default)(a,"defaultOpen",!1),(0,s.default)(a,"allowClear",!0),a),(kt||[]).map(function(e){return b.default.createElement(m.default.Option,{key:e,value:e,data:e},e)})))),b.default.createElement(f.default.Item,{key:"device",label:"\u8bbe\u5907\u4fe1\u606f",style:{marginBottom:0}},b.default.createElement(u.default.Group,{compact:!0},n("device.key",{initialValue:"deviceId"})(b.default.createElement(m.default,{style:{width:100},id:"key"},b.default.createElement(m.default.Option,{value:"deviceId"},"\u8bbe\u5907ID"),b.default.createElement(m.default.Option,{value:"deviceName"},"\u8bbe\u5907\u540d\u79f0"))),n("device.value",{initialValue:void 0})(b.default.createElement(u.default,{id:"value",style:{width:"calc(100% - 100px)"},placeholder:"\u8f93\u5165\u8bbe\u5907\u4fe1\u606f"})))),b.default.createElement("div",{style:{textAlign:"right"}},b.default.createElement(c.default,{type:"primary",ghost:!1,onClick:function(){ve(!0),Mt()}},"\u67e5\u8be2"),b.default.createElement(c.default,{style:{marginLeft:8},onClick:function(){ve(!0),x.resetFields(),Jt({filter:{where:"objectType = device",pageSize:D}},"new")}},"\u91cd\u7f6e"))),b.default.createElement("div",{style:{position:"relative"}},b.default.createElement(r.default,{defaultActiveKey:"initiateProcess"},b.default.createElement(r.default.TabPane,{tab:"\u53d1\u8d77\u6d41\u7a0b",key:"initiateProcess"},b.default.createElement(p.default,{style:{position:"absolute",left:"92px",top:"15px"},checkedChildren:"\u9690\u85cf",unCheckedChildren:"\u663e\u793a",checked:tt,onChange:function(e){at(e)}}),b.default.createElement("div",{style:{display:tt?"block":"none"}},b.default.createElement(f.default,null,b.default.createElement(o.default.Group,{defaultValue:je,onChange:function(e){Je(e)}},b.default.createElement("div",{style:{marginBottom:10}},b.default.createElement(o.default,{value:"001"},"\u5fc3\u8df3\u6570\u636e")),b.default.createElement("div",{style:{marginBottom:10}},b.default.createElement(o.default,{value:"002"},"\u62a5\u8b66\u6570\u636e")),b.default.createElement("div",{style:{marginBottom:10}},b.default.createElement(o.default,{value:"003"},"\u8d44\u4ea7\u6570\u636e")),b.default.createElement("div",{style:{marginBottom:10}},b.default.createElement(o.default,{value:"004"},"\u4f4d\u7f6e\u6570\u636e"))),b.default.createElement("div",{style:{textAlign:"right"}},b.default.createElement(c.default,{type:"primary",onClick:function(){var e=[{code:"001",name:"\u5fc3\u8df3\u6570\u636e"},{code:"002",name:"\u62a5\u8b66\u6570\u636e"},{code:"003",name:"\u8d44\u4ea7\u6570\u636e"},{code:"004",name:"\u4f4d\u7f6e\u6570\u636e"}],t={orgId:"",orgName:"",productList:[],dataList:[],address:""},a=[];je.length>0&&e.forEach(function(e){je.indexOf(e.code)>-1&&a.push(e)}),t.dataList=a,x.validateFields(function(e,l){var n=l.orgId,d=l.classifiedIdList,o=l.addr;if(!n)return i.default.error("\u8bf7\u9009\u62e9\u5efa\u8bbe\u5355\u4f4d"),!1;if(!d&&!d.length)return i.default.error("\u8bf7\u9009\u62e9\u8bbe\u5907\u7c7b\u578b"),!1;if(!a.length)return i.default.error("\u8bf7\u9009\u62e9\u6570\u636e\u7c7b\u578b"),!1;t.orgId=n,t.address=o.toString()||"",n&&Ge.some(function(e){if(e.id===n)return t.orgName=e.name,d.length&&e.deviceInstance.some(function(e){d.indexOf(e.classifiedId)>-1&&t.productList.push({productId:e.classifiedId,productName:e.classifiedName})}),!0}),console.log("\u53d1\u8d77\u6d41\u7a0b\u6570\u636e\uff1a",t);var r=new URL(window.location.href);if(r.href.indexOf("/location/popups")>-1)window.parent&&window.parent.postMessage({appkey:"D896BABF33AA7D2CB88D655ECBD9A29A",type:"enter",data:JSON.stringify(t)},"*");else{var c=window.portal_device+"&data="+JSON.stringify(t);window.open(c)}})}},"popup"===dt?"\u786e\u5b9a":"\u53d1\u8d77\u6570\u636e\u7533\u8bf7\u6d41\u7a0b"))))))),b.default.createElement(r.default,{defaultActiveKey:"basic",onChange:function(e){"deviceAlarm"===e&&(Oe({}),jt())}},b.default.createElement(r.default.TabPane,{tab:"\u8bbe\u5907\u5217\u8868",key:"deviceList"},b.default.createElement("div",{style:{paddingBottom:15}},b.default.createElement("span",{style:{fontSize:14}},b.default.createElement("b",null,"\u8bbe\u5907\u8bb0\u5f55\xa0",b.default.createElement("span",{style:{fontSize:20}},B.length),"\xa0\u6761"))),b.default.createElement("div",null,b.default.createElement(d.default,{loading:e.loading,columns:At,bordered:!1,size:"middle",dataSource:B||{},rowKey:"deviceInfo.objectId",key:"deviceInfo.objectId",onRow:function(e){return{onDoubleClick:function(){Vt(e)}}},pagination:{pageSize:10,size:"small",hideOnSinglePage:!0}})))))),Q&&""!==$&&b.default.createElement(S.default,{deviceId:$,close:function(){K(!1),ee("")}}),ye&&b.default.createElement(k.default,{data:De,save:function(e){qe(e),Ee(!1)},close:function(){Ee(!1)}}),xe&&b.default.createElement(L.default,{close:function(){we(!1)}}),b.default.createElement("div",{hidden:!0},b.default.createElement(C.default,{device:Le})),ct&&b.default.createElement(_.default,{isGps:gt,deviceId:$,deviceInfo:mt,close:function(){ut(!1)}})))},z=(0,x.connect)(function(e){var t=e.global,a=e.settings;return{collapsed:t.collapsed,settings:a}})(f.default.create()(P));t.default=z}}]);