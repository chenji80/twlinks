(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"1yts":function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("y8nQ");var i=n(a("Vl3Y"));a("g9YV");var d=n(a("wCAj"));a("fu2T");var o=n(a("gK9i"));a("bP8k");var r=n(a("gFTJ"));a("bbsP");var c=n(a("/wGt")),u=l(a("q1tI")),s=n(a("lc5D")),f=n(a("jQzR")),m=function(e){return(0,u.useEffect)(function(){},[]),u.default.createElement(c.default,{title:"\u6570\u636e\u76ee\u5f55",visible:!0,placement:"right",onClose:function(){return e.close()},width:750},u.default.createElement(r.default,{title:"\u8bbe\u5907\u57fa\u672c\u4fe1\u606f",bordered:!0,column:1,size:"small",style:{marginBottom:20}},u.default.createElement(r.default.Item,{label:"\u8bbe\u5907ID"},e.deviceInfo.objectId),u.default.createElement(r.default.Item,{label:"\u8bbe\u5907\u540d\u79f0"},e.deviceInfo.deviceName),u.default.createElement(r.default.Item,{label:"\u5efa\u8bbe\u5355\u4f4d"},e.deviceInfo.orgName),u.default.createElement(r.default.Item,{label:"\u8bbe\u5907\u5730\u5740"},e.deviceInfo.addr),u.default.createElement(r.default.Item,{label:"\u5efa\u8bbe\u65f6\u95f4"},e.deviceInfo.startUseTime)),u.default.createElement("div",{style:{marginBottom:20}},u.default.createElement("div",{className:"ant-descriptions-title"},"\u793a\u4f8b\u6570\u636e"),u.default.createElement(o.default,{defaultActiveKey:["1","2","3","4"]},u.default.createElement(o.default.Panel,{header:"\u57fa\u7840\u6570\u636e",key:"1"},u.default.createElement("h4",{style:{fontWeight:"bold"}},"\u8bf4\u660e"),u.default.createElement(d.default,{size:"middle",pagination:!1,dataSource:f.default.basicData,columns:f.default.tableHerder})),!e.isGps&&u.default.createElement(o.default.Panel,{header:"\u5fc3\u8df3\u6570\u636e",key:"2"},u.default.createElement("h4",{style:{fontWeight:"bold",marginBottom:10}},"\u8bf4\u660e"),u.default.createElement(d.default,{style:{marginBottom:20},size:"middle",pagination:!1,dataSource:f.default.heartData,columns:f.default.tableHerder}),u.default.createElement("h4",{style:{fontWeight:"bold",marginBottom:10}},"\u63a5\u53e3\u793a\u4f8b\u6570\u636e"),u.default.createElement(s.default,{readOnly:!0,value:JSON.stringify(f.default.heartDataJson,null,2),mode:"json",theme:"eclipse",name:"app_code_editor",key:"deviceShadow",fontSize:14,showPrintMargin:!0,showGutter:!0,wrapEnabled:!0,highlightActiveLine:!0,enableSnippets:!0,style:{width:"100%",height:"160px"},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2}})),!e.isGps&&u.default.createElement(o.default.Panel,{header:"\u62a5\u8b66\u6570\u636e",key:"3"},u.default.createElement("h4",{style:{fontWeight:"bold",marginBottom:10}},"\u8bf4\u660e"),u.default.createElement(d.default,{style:{marginBottom:20},size:"middle",pagination:!1,dataSource:f.default.alertData,columns:f.default.tableHerder}),u.default.createElement("h4",{style:{fontWeight:"bold",marginBottom:10}},"\u63a5\u53e3\u793a\u4f8b\u6570\u636e"),u.default.createElement(s.default,{readOnly:!0,value:JSON.stringify(f.default.alertDataJson,null,2),mode:"json",theme:"eclipse",name:"app_code_editor",key:"deviceShadow",fontSize:14,showPrintMargin:!0,showGutter:!0,wrapEnabled:!0,highlightActiveLine:!0,enableSnippets:!0,style:{width:"100%",height:"220px"},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2}})),e.isGps&&u.default.createElement(o.default.Panel,{header:"\u4f4d\u7f6e\u6570\u636e",key:"4"},u.default.createElement("h4",{style:{fontWeight:"bold",marginBottom:10}},"\u8bf4\u660e"),u.default.createElement(d.default,{style:{marginBottom:20},size:"middle",pagination:!1,dataSource:f.default.positionData,columns:f.default.tableHerder}),u.default.createElement("h4",{style:{fontWeight:"bold",marginBottom:10}},"\u63a5\u53e3\u793a\u4f8b\u6570\u636e"),u.default.createElement(s.default,{readOnly:!0,value:JSON.stringify(f.default.positionDataJson,null,2),mode:"json",theme:"eclipse",name:"app_code_editor",key:"deviceShadow",fontSize:14,showPrintMargin:!0,showGutter:!0,wrapEnabled:!0,highlightActiveLine:!0,enableSnippets:!0,style:{width:"100%",height:"100px"},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2}})))))},p=i.default.create()(m);t.default=p},jQzR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=[{title:"\u5b57\u6bb5\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u5b57\u6bb5\u7f16\u7801",dataIndex:"code",key:"code"},{title:"\u5b57\u6bb5\u7c7b\u578b",dataIndex:"type",key:"type"},{title:"\u5b57\u6bb5\u957f\u5ea6",dataIndex:"len",key:"len"},{title:"\u662f\u5426\u5fc5\u987b",dataIndex:"required",key:"required"},{title:"\u793a\u4f8b\u6570\u636e",dataIndex:"example",key:"example"}],n=[{name:"\u8bbe\u5907\u7f16\u7801",code:"deviceCode",type:"\u5b57\u7b26\u4e32",len:"32",required:"\u662f",example:"Mh_Yangan_001"},{name:"\u8bbe\u5907\u540d\u79f0",code:"deviceName",type:"\u5b57\u7b26\u4e32",len:"32",required:"\u662f",example:"\u4e00\u53f7\u70df\u611f\u5668"},{name:"\u8bbe\u5907\u6240\u5c5e\u4ea7\u54c1\u7f16\u7801",code:"productCode",type:"\u5b57\u7b26\u4e32",len:"32",required:"\u662f",example:"Mh_Yangan"},{name:"\u5f52\u5c5e\u5355\u4f4d\u540d\u79f0",code:"orgName",type:"\u5b57\u7b26\u4e32",len:"32",required:"\u662f",example:"\u9a6c\u6865\u9547"},{name:"\u5f52\u5c5e\u5355\u4f4d\u7f16\u7801",code:"orgId",type:"\u5b57\u7b26\u4e32",len:"32",required:"\u662f",example:"10705"}],i=[{name:"\u8bbe\u5907\u7f16\u7801",code:"deviceCode",type:"\u5b57\u7b26\u4e32",len:32,required:"\u662f",example:"Mh_Yangan_001"},{name:"\u4fe1\u53f7\u5f3a\u5ea6",code:"signalLevel",type:"\u5b57\u7b26\u4e32",len:30,required:"\u662f",example:"-120"},{name:"\u7535\u91cf",code:"volt",type:"\u6570\u5b57",len:15,required:"\u662f",example:3.3},{name:"\u7ecf\u5ea6",code:"lon",type:"\u6570\u5b57",len:15,required:"\u5426",example:122.375284},{name:"\u7eac\u5ea6",code:"lat",type:"\u6570\u5b57",len:15,required:"\u5426",example:31.11618},{name:"\u53d1\u751f\u65f6\u95f4",code:"createdTime",type:"\u65f6\u95f4\u6233",len:"",required:"\u662f",example:1573089486}],d={deviceCode:"deviceCode",signalLevel:100,volt:99,lon:122.375284,lat:31.11618,createdTime:1573089486,param:{}},o=[{name:"\u8bbe\u5907\u7f16\u7801",code:"deviceCode",type:"\u5b57\u7b26\u4e32",len:32,required:"\u662f",example:"Mh_Yangan_001"},{name:"\u7ecf\u5ea6",code:"lon",type:"\u6570\u5b57",len:15,required:"\u5426",example:122.375284},{name:"\u7eac\u5ea6",code:"lat",type:"\u6570\u5b57",len:15,required:"\u5426",example:31.11618},{name:"\u53d1\u751f\u65f6\u95f4",code:"createdTime",type:"\u65f6\u95f4\u6233",len:"",required:"\u662f",example:1573089486},{name:"\u53d1\u751f\u5730\u70b9",code:"addr",type:"\u5b57\u7b26\u4e32",len:255,required:"\u662f",example:"\u94f6\u6625\u8def1799\u5f04\u56ed\u533a"},{name:"\u4e8b\u4ef6\u5927\u7c7b\u7f16\u7801",code:"eventCode1",type:"\u5b57\u7b26\u4e32",len:50,required:"\u662f",example:2},{name:"\u4e8b\u4ef6\u5927\u7c7b\u540d\u79f0",code:"eventName1",type:"\u5b57\u7b26\u4e32",len:255,required:"\u662f",example:"\u9884\u8b66\u4e8b\u4ef6"},{name:"\u4e8b\u4ef6\u5c0f\u7c7b\u7f16\u7801",code:"eventCode2",type:"\u5b57\u7b26\u4e32",len:50,required:"\u662f",example:2001},{name:"\u4e8b\u4ef6\u5c0f\u7c7b\u540d\u79f0",code:"eventName2",type:"\u5b57\u7b26\u4e32",len:255,required:"\u662f",example:"\u7535\u91cf\u4e0d\u8db3"}],r={deviceCode:"Mh_Yangan_001",lon:122.375284,lat:31.11618,createdTime:1573089486,addr:"\u4e0a\u6d77\u5e02",eventCode1:"02",eventName1:"\u9884\u8b66\u4e8b\u4ef6",eventCode2:"02001",eventName2:"\u7535\u91cf\u4e0d\u8db3",description:"\u5907\u6ce8\u4fe1\u606f",param:{}},c=[{name:"\u8bbe\u5907\u7f16\u7801",code:"deviceCode",type:"\u5b57\u7b26\u4e32",len:32,required:"\u662f",example:"Mh_Yangan_001"},{name:"\u7ecf\u5ea6",code:"lon",type:"\u6570\u5b57",len:15,required:"\u5426",example:122.375284},{name:"\u7eac\u5ea6",code:"lat",type:"\u6570\u5b57",len:15,required:"\u5426",example:31.11618},{name:"\u53d1\u751f\u65f6\u95f4",code:"createdTime",type:"\u65f6\u95f4\u6233",len:"",required:"\u662f",example:1573089486}],u={deviceCode:"Mh_Yangan_001",lon:122.375284,lat:31.11618,createdTime:1573089486},s={tableHerder:l,basicData:n,heartData:i,heartDataJson:d,alertData:o,alertDataJson:r,positionData:c,positionDataJson:u};t.default=s},lObD:function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var i=n(a("wCAj"));a("miYZ");var d=n(a("tsqr"));a("sRBo");var o=n(a("kaz8"));a("Znn+");var r=n(a("ZTPi"));a("+L6B");var c=n(a("2/Rp"));a("OaEy");var u=n(a("2fM7"));a("5NDa");var s=n(a("5rEg"));a("nRaC");var f=n(a("5RzL"));a("y8nQ");var m=n(a("Vl3Y"));a("BoS7");var p=n(a("Sdc0"));a("IzEo");var v=n(a("bx4M"));a("T2oS");var h=n(a("W9HT")),y=n(a("d6i3")),g=n(a("eHn4")),b=n(a("1l/V")),E=n(a("gWZ8")),x=n(a("qIgq")),I=l(a("q1tI")),w=a("/MKj"),S=n(a("CLrh")),L=n(a("fDFt")),k=n(a("gkVL")),C=n(a("cPhT")),D=n(a("eFae")),_=n(a("1yts")),q=9999999,P=null,z=function(e){var t={pathPolygon:[],markersList:[],regionList:[],productList:[],mapCreated:{},infoWindow:{},massMarksCreated:{},centerScale:{center:[106.57,29.52]},regionInfo:{},satelliteLayer:{},roadNetLayer:{},deviceData:{},contentInfo:["bg","road","point","building"],alarmLogData:{},searchParam:{pageSize:10,sorts:{field:"alarmTime",order:"desc"}},processInfo:[],departmentList:[],deviceTypeList:[],showProcessSet:!0,showMode:"default",examplePopVisible:!1,isGps:!1},a=e.form.getFieldDecorator,l=e.form,n=(0,I.useState)(t.pathPolygon),w=(0,x.default)(n,2),z=(w[0],w[1],(0,I.useState)(t.markersList)),N=(0,x.default)(z,2),O=N[0],B=N[1],T=(0,I.useState)(t.regionList),M=(0,x.default)(T,1),j=(M[0],(0,I.useState)(t.productList)),A=(0,x.default)(j,1),K=(A[0],(0,I.useState)(t.mapCreated)),J=(0,x.default)(K,2),G=(J[0],J[1],(0,I.useState)(t.infoWindow)),W=(0,x.default)(G,2),Y=(W[0],W[1],(0,I.useState)(t.massMarksCreated)),F=(0,x.default)(Y,2),V=(F[0],F[1],(0,I.useState)(!1)),R=(0,x.default)(V,2),H=R[0],Z=R[1],Q=(0,I.useState)(""),U=(0,x.default)(Q,2),X=U[0],$=U[1],ee=(0,I.useState)(t.centerScale),te=(0,x.default)(ee,2),ae=(te[0],te[1]),le=(0,I.useState)(t.satelliteLayer),ne=(0,x.default)(le,2),ie=(ne[0],ne[1],(0,I.useState)(t.roadNetLayer)),de=(0,x.default)(ie,2),oe=(de[0],de[1],(0,I.useState)(!0)),re=(0,x.default)(oe,2),ce=re[0],ue=re[1],se=(0,I.useState)(!0),fe=(0,x.default)(se,2),me=fe[0],pe=fe[1],ve=(0,I.useState)(!1),he=(0,x.default)(ve,2),ye=he[0],ge=he[1],be=(0,I.useState)(!1),Ee=(0,x.default)(be,2),xe=Ee[0],Ie=Ee[1],we=(0,I.useState)(t.deviceData),Se=(0,x.default)(we,2),Le=Se[0],ke=(Se[1],(0,I.useState)(t.contentInfo)),Ce=(0,x.default)(ke,2),De=Ce[0],_e=Ce[1],qe=(0,I.useState)(t.alarmLogData),Pe=(0,x.default)(qe,2),ze=(Pe[0],Pe[1]),Ne=(0,I.useState)(t.searchParam),Oe=(0,x.default)(Ne,2),Be=Oe[0],Te=(Oe[1],(0,I.useState)(t.processInfo)),Me=(0,x.default)(Te,2),je=Me[0],Ae=Me[1],Ke=(0,I.useState)(t.departmentList),Je=(0,x.default)(Ke,2),Ge=Je[0],We=Je[1],Ye=(0,I.useState)(t.deviceTypeList),Fe=(0,x.default)(Ye,2),Ve=(Fe[0],Fe[1],(0,I.useState)(t.deviceTypeList)),Re=(0,x.default)(Ve,2),He=(Re[0],Re[1],(0,I.useState)(t.showProcessSet)),Ze=(0,x.default)(He,2),Qe=Ze[0],Ue=Ze[1],Xe=(0,I.useState)(t.showMode),$e=(0,x.default)(Xe,2),et=$e[0],tt=$e[1],at=(0,I.useState)(t.examplePopVisible),lt=(0,x.default)(at,2),nt=lt[0],it=lt[1],dt=(0,I.useState)({}),ot=(0,x.default)(dt,2),rt=ot[0],ct=ot[1],ut=(0,I.useState)(t.isGps),st=(0,x.default)(ut,2),ft=st[0],mt=st[1],pt=(0,I.useState)([]),vt=(0,x.default)(pt,2),ht=(vt[0],vt[1]),yt=(0,I.useState)([]),gt=(0,x.default)(yt,2),bt=(gt[0],gt[1],(0,I.useState)([])),Et=(0,x.default)(bt,2),xt=(Et[0],Et[1],(0,I.useState)(0)),It=(0,x.default)(xt,2),wt=It[0],St=It[1];function Lt(e){var t=[],a=[];e.forEach(function(e){if(e){var l,n=(l=CoordUtil).gcj02towgs84.apply(l,(0,E.default)(e.lnglat));a.push([n[0],n[1],0]),t.push({id:e.deviceInfo.id,position:{x:n[0],y:n[1],z:0},attributes:e,image:{url:e.deviceInfo.imgpath?window.location.origin+"/mapIcon@2x/"+e.deviceInfo.imgpath+".png":window.location.origin+"/mapIcon@2x/MAP_ICON_001_online.png",width:46,height:53,pixelOffset:[0,-23]}})}});var l={isZoom:!1,click:function(e){qt(e.attributes)}};wt&&P.goTo(a,{duration:3,offset:{heading:0,pitch:-89,range:0},maximumZoomDistance:5e4}),P.Locate.pointLocate(t,l),St(wt+1)}(0,I.useEffect)(function(){var e=new URL(window.location.href),t="default";e.href.indexOf("/location/popups")>-1?t="popup":e.href.indexOf("/location/simple")>-1&&(t="simple"),tt(t),S.default.deviceInstance.queryDimensionDevice().then(function(e){if(200===e.status){var t=e.result;We(t)}}).catch(function(){})},[]),(0,I.useEffect)(function(){return P||S.default.deviceLocation.sm2().then(function(e){var t=e.result;P=new JMap;var a={base_layer_name:"dark",model_data_name:"",camera:{x:121.51755979681737,y:31.119248058007418,radius:18e3,offset:{heading:-4,pitch:-90,range:0}},map_complete_callback:function(){pe(!1),_t({filter:{where:"objectType = device",pageSize:q}},"new")}};P.createMap("mapContainer",t,window.location.origin,a,{}),P.hideBuildingModel();var l=new JMapQuery(P),n=new JMapQueryParam({queryMapService:"mh_dyn_district",queryMapLayers:[1],queryGeometry:null,queryWhere:"",outFields:["*"],callBack:i});function i(e){ht(e.features),console.log("\u8857\u9053\uff1a",e)}l.execQuery(n)}),function(){P&&(P.Popup.hide(),P=null)}},[]);var kt=function(){var e=(0,b.default)(y.default.mark(function e(){return y.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:l.validateFields(function(e,t){if(!e){var a=["objectType = device"],l={classifiedIdList:[],orgId:[],addr:[]};t.addrList&&t.addrList.length>0&&t.addrList.map(function(e){var t=e.split("-");Ge.forEach(function(e,a){a==t[0]&&-1==l.classifiedIdList.indexOf(e.primaryKey)&&l.classifiedIdList.push(e.primaryKey),e.children&&e.children.length&&e.children.forEach(function(e,a){a==t[1]&&-1==l.orgId.indexOf(e.primaryKey)&&l.orgId.push(e.primaryKey),e.children&&e.children.length&&e.children.forEach(function(e,a){a==t[2]&&-1==l.addr.indexOf(e.primaryKey)&&l.addr.push(e.primaryKey)})})})}),l.classifiedIdList&&0!==l.classifiedIdList.length&&a.push("classifiedId in ("+l.classifiedIdList.toString()+")"),"deviceId"===t.device.key&&t.device.value?a.push("objectId="+t.device.value):"deviceName"===t.device.key&&t.device.value&&a.push("deviceName="+t.device.value),_t({shape:(0,g.default)({orgId:l.orgId,addr:l.addr,objectId:t.region,deviceName:"deviceName"===t.device.key&&t.device.value?t.device.value:""},"objectId","deviceId"===t.device.key&&t.device.value?t.device.value:""),filter:{where:a.join(" and "),pageSize:q}},"old")}});case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Ct=[{title:"\u7c7b\u578b",dataIndex:"deviceInfo.classifiedName"},{title:"\u540d\u79f0",dataIndex:"deviceInfo.deviceName"},{title:"\u5730\u5740",dataIndex:"deviceInfo.addr"},{title:"\u64cd\u4f5c",align:"center",width:"120px",render:function(e){return I.default.createElement(I.Fragment,null,I.default.createElement("a",{onClick:function(){window.seeExample(e.deviceInfo.productId)}},"\u67e5\u770b\u6570\u636e\u76ee\u5f55"))}}],Dt=function(){l.validateFields(function(e,t){e||(Be.terms||(Be.terms={}),t.productId&&(Be.terms.productId=t.productId),"deviceId"===t.device.key&&t.device.value?Be.terms.deviceId=t.device.value:"deviceName"===t.device.key&&t.device.value&&(Be.terms.deviceName=t.device.value))})},_t=function(e,t){P&&(P.Locate.clearLocate(),P.Popup.hide());var a=[];S.default.location._search_geo_json2(e).then(function(e){200===e.status&&(e.result.features.map(function(e){"Point"===e.geometry.type&&("old"===t&&ae({center:e.geometry.coordinates}),a.push({lnglat:e.geometry.coordinates,deviceInfo:e.properties}))}),B(a),P&&a.length&&Lt(a),pe(!1))}).catch(function(){})};window.seeExample=function(e){P&&P.Popup.hide(),e&&mt(e.indexOf("GPS")>-1),null===O||void 0===O||O.some(function(t){if(t.deviceInfo.productId===e)return ct(t.deviceInfo),it(!0),!0})};var qt=function(e){var t;P.Popup.hide();var a="<div class='yscDynamicLayer ysc-dynamic-layer ys-css3-box'><div class='line' style='transform: scale(0.6);transform-origin: right 0;'></div>\n               <div class='main'>\n                   <div style='float: right;width: 13px;height: 13px;position: absolute;top:8px;right:9px;cursor: pointer;' onclick=\"javascript:$('.yscDynamicLayer').parent().remove()\"></div>\n                   <div style='margin-left: 3%;right:50px;top:25px;'>\n                        <div style='font-size:14px;color:#fff;height:20px;line-height:20px'><span style='color:#48cbe8'>\u8bbe\u5907ID\uff1a</span>".concat(e.deviceInfo.objectId,"</div>\n                        <div style='font-size:14px;color:#fff;height:20px;line-height:20px'><span style='color:#48cbe8'>\u8bbe\u5907\u540d\u79f0\uff1a</span>").concat(e.deviceInfo.deviceName,"</div>\n                        <div style='font-size:14px;color:#fff;height:20px;line-height:20px'><span style='color:#48cbe8'>\u8bbe\u5907\u5730\u5740\uff1a</span>").concat(e.deviceInfo.addr,"</div>\n                        <div style='font-size:14px;color:#fff;height:20px;line-height:20px'><span style='color:#48cbe8'>\u5f53\u524d\u4f4d\u7f6e\uff1a</span>").concat(e.lnglat.valueOf(),"</div>\n                        <div style='font-size:14px;color:#fff;height:20px;line-height:20px'><span style='color:#48cbe8'>\u6295\u5165\u4f7f\u7528\u65e5\u671f\uff1a</span>").concat(e.deviceInfo.startUseTime,"</div>\n                        <div style='font-size:14px;color:#fff;height:20px;line-height:20px'><span style='color:#48cbe8'>\u62a5\u8b66\u6b21\u6570\uff1a</span>").concat(e.deviceInfo.alarmCount,"</div>\n                   </div>\n                   <button style='position: absolute; bottom: 15px; left: 24px;' class='ant-btn ant-btn-primary ant-btn-sm' onclick=\"javascript:window.seeExample('").concat(e.deviceInfo.productId,"')\">\u67e5\u770b\u6570\u636e\u76ee\u5f55</button>\n               </div>\n              </div>"),l=(t=CoordUtil).gcj02towgs84.apply(t,(0,E.default)(e.lnglat)),n={id:e.deviceInfo.id,position:{x:l[0],y:l[1],z:0},element:a},i={isZoom:!1};P.goTo({x:l[0],y:l[1],radius:100},{duration:3,offset:{heading:0,pitch:-90,range:0},maximumZoomDistance:5e4}),P.Popup.show(n,i)};return I.default.createElement("div",null,I.default.createElement(h.default,{tip:"\u52a0\u8f7d\u4e2d...",spinning:me},I.default.createElement("div",{style:{width:"100%",height:"default"!==et?"100vh":"88vh"}},I.default.createElement("div",{id:"mapContainer",style:{width:"100%",height:"default"!==et?"100vh":"88vh"}})),I.default.createElement("div",{style:{width:"30%",height:"default"!==et?"100vh":"88vh",float:"right",maxWidth:"480px",marginTop:"default"!==et?"-100vh":"-88vh",paddingTop:5,paddingRight:5}},I.default.createElement("div",{style:{textAlign:"left"}},I.default.createElement(v.default,{size:"small"},"\u4fe1\u606f\u9762\u677f\uff1a",I.default.createElement(p.default,{key:"panelInfoSwitch",checked:ce,checkedChildren:"\u5f00",unCheckedChildren:"\u5173",onChange:function(e){ue(e)}}))),ce&&I.default.createElement(v.default,{size:"small",bordered:!1,style:{height:"default"!==et?"90vh":"80vh",overflowY:"auto",overflowX:"hidden",marginTop:5}},I.default.createElement(m.default,{labelCol:{span:5},wrapperCol:{span:19},key:"queryForm"},I.default.createElement(m.default.Item,{key:"addrList",label:"\u8bbe\u5907\u7c7b\u578b",style:{marginBottom:0}},a("addrList",{})(I.default.createElement(f.default,{allowClear:!0,maxTagCount:1,multiple:!0,treeCheckable:!0,treeData:Ge,dropdownStyle:{maxHeight:400,overflow:"auto"},filterTreeNode:function(e,t){return t.props.title.indexOf(e)>-1}}))),I.default.createElement(m.default.Item,{key:"device",label:"\u8bbe\u5907\u4fe1\u606f",style:{marginBottom:0}},I.default.createElement(s.default.Group,{compact:!0},a("device.key",{initialValue:"deviceId"})(I.default.createElement(u.default,{style:{width:100},id:"key"},I.default.createElement(u.default.Option,{value:"deviceId"},"\u8bbe\u5907ID"),I.default.createElement(u.default.Option,{value:"deviceName"},"\u8bbe\u5907\u540d\u79f0"))),a("device.value",{initialValue:void 0})(I.default.createElement(s.default,{id:"value",style:{width:"calc(100% - 100px)"},placeholder:"\u8f93\u5165\u8bbe\u5907\u4fe1\u606f"})))),I.default.createElement("div",{style:{textAlign:"right"}},I.default.createElement(c.default,{type:"primary",ghost:!1,onClick:function(){pe(!0),kt()}},"\u67e5\u8be2"),I.default.createElement(c.default,{style:{marginLeft:8},onClick:function(){pe(!0),l.resetFields(),_t({filter:{where:"objectType = device",pageSize:q}},"new")}},"\u91cd\u7f6e"))),I.default.createElement("div",{style:{position:"relative"}},I.default.createElement(r.default,{defaultActiveKey:"initiateProcess"},I.default.createElement(r.default.TabPane,{tab:"\u53d1\u8d77\u6d41\u7a0b",key:"initiateProcess"},I.default.createElement(p.default,{style:{position:"absolute",left:"92px",top:"15px"},checkedChildren:"\u9690\u85cf",unCheckedChildren:"\u663e\u793a",checked:Qe,onChange:function(e){Ue(e)}}),I.default.createElement("div",{style:{display:Qe?"block":"none"}},I.default.createElement(m.default,null,I.default.createElement(o.default.Group,{defaultValue:je,onChange:function(e){Ae(e)}},I.default.createElement("div",{style:{marginBottom:10}},I.default.createElement(o.default,{value:"001"},"\u5fc3\u8df3\u6570\u636e")),I.default.createElement("div",{style:{marginBottom:10}},I.default.createElement(o.default,{value:"002"},"\u62a5\u8b66\u6570\u636e")),I.default.createElement("div",{style:{marginBottom:10}},I.default.createElement(o.default,{value:"003"},"\u8d44\u4ea7\u6570\u636e")),I.default.createElement("div",{style:{marginBottom:10}},I.default.createElement(o.default,{value:"004"},"\u4f4d\u7f6e\u6570\u636e"))),I.default.createElement("div",{style:{textAlign:"right"}},I.default.createElement(c.default,{type:"primary",onClick:function(){var e=[{code:"001",name:"\u5fc3\u8df3\u6570\u636e"},{code:"002",name:"\u62a5\u8b66\u6570\u636e"},{code:"003",name:"\u8d44\u4ea7\u6570\u636e"},{code:"004",name:"\u4f4d\u7f6e\u6570\u636e"}],t={dataList:[],deviceList:[]},a=[];je.length>0&&e.forEach(function(e){je.indexOf(e.code)>-1&&a.push(e)}),t.dataList=a,l.validateFields(function(e,a){var l=[],n=[],i=a.addrList;if(!(i&&i.length>0))return d.default.error("\u8bf7\u9009\u62e9\u8bbe\u5907\u7c7b\u578b"),!1;if(i.forEach(function(e){var t=e.split("-");Ge.forEach(function(e,a){t[0]==a&&e.children.forEach(function(a,i){if(t[1]==i){var d=n.indexOf(a.primaryKey);-1==d&&(n.push(a.primaryKey),l.push({orgId:a.primaryKey,orgName:a.title,productList:[]}),d=n.length-1);var o=[];a.children&&a.children.length&&a.children.forEach(function(e,a){a==t[2]&&o.push(e.primaryKey)});var r=-1;if(l[d].productList.some(function(t,a){if(t.productId==e.primaryKey)return r=a,!0}),-1==r)l[d].productList.push({productId:e.primaryKey,productName:e.title,address:o});else{var c=l[d].productList[r].address;l[d].productList[r].address=[].concat((0,E.default)(c),o)}}})})}),!t.dataList.length)return d.default.error("\u8bf7\u9009\u62e9\u6570\u636e\u7c7b\u578b"),!1;t.deviceList=l,console.log("\u53d1\u8d77\u6d41\u7a0b\u6570\u636e\uff1a",JSON.stringify(t));var o=new URL(window.location.href);o.href.indexOf("/location/popups")>-1?window.parent&&window.parent.postMessage({appkey:"D896BABF33AA7D2CB88D655ECBD9A29A",type:"enter",data:JSON.stringify(t)},"*"):(pe(!0),S.default.deviceLocation.submitDeviceData(t).then(function(e){if(pe(!1),200==e.status){var t=window.portal_device+"&data="+e.result;window.open(t)}}))})}},"popup"===et?"\u786e\u5b9a":"\u53d1\u8d77\u6570\u636e\u7533\u8bf7\u6d41\u7a0b"))))))),I.default.createElement(r.default,{defaultActiveKey:"basic",onChange:function(e){"deviceAlarm"===e&&(ze({}),Dt())}},I.default.createElement(r.default.TabPane,{tab:"\u8bbe\u5907\u5217\u8868",key:"deviceList"},I.default.createElement("div",{style:{paddingBottom:15}},I.default.createElement("span",{style:{fontSize:14}},I.default.createElement("b",null,"\u8bbe\u5907\u8bb0\u5f55\xa0",I.default.createElement("span",{style:{fontSize:20}},O.length),"\xa0\u6761"))),I.default.createElement("div",null,I.default.createElement(i.default,{loading:e.loading,columns:Ct,bordered:!1,size:"middle",dataSource:O||{},rowKey:"deviceInfo.objectId",key:"deviceInfo.objectId",onRow:function(e){return{onDoubleClick:function(){qt(e)}}},pagination:{pageSize:10,size:"small",hideOnSinglePage:!0}})))))),H&&""!==X&&I.default.createElement(L.default,{deviceId:X,close:function(){Z(!1),$("")}}),ye&&I.default.createElement(k.default,{data:De,save:function(e){_e(e),ge(!1)},close:function(){ge(!1)}}),xe&&I.default.createElement(C.default,{close:function(){Ie(!1)}}),I.default.createElement("div",{hidden:!0},I.default.createElement(D.default,{device:Le})),nt&&I.default.createElement(_.default,{isGps:ft,deviceId:X,deviceInfo:rt,close:function(){it(!1)}})))},N=(0,w.connect)(function(e){var t=e.global,a=e.settings;return{collapsed:t.collapsed,settings:a}})(m.default.create()(z));t.default=N}}]);